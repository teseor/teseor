@use '../../00-config/tokens/variables' as t;

// Radio component - native radio input with custom styling
// Sizes align to grid

@layer components.tokens {
  .radio {
    --_size: var(--ui-radio-size, calc(#{t.$unit} * 2.5));
    --_bg: var(--ui-radio-bg, var(--ui-color-bg, #{t.$color-bg}));
    --_bg-checked: var(--ui-radio-bg-checked, var(--ui-color-primary, #{t.$color-primary}));
    --_border-color: var(--ui-radio-border-color, var(--ui-color-border-strong, #{t.$color-border-strong}));
    --_border-color-focus: var(--ui-radio-border-color-focus, var(--ui-color-primary, #{t.$color-primary}));
    --_dot-color: var(--ui-radio-dot-color, var(--ui-color-text-inverse, #{t.$color-text-inverse}));
  }

  .radio--sm {
    --_size: var(--ui-radio-size-sm, calc(#{t.$unit} * 2));
  }

  .radio--lg {
    --_size: var(--ui-radio-size-lg, calc(#{t.$unit} * 3));
  }

  .radio--error {
    --_border-color: var(--ui-radio-error-border, var(--ui-color-danger, #{t.$color-danger}));
    --_border-color-focus: var(--ui-radio-error-border, var(--ui-color-danger, #{t.$color-danger}));
  }
}

@layer components.styles {
  .radio {

    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    justify-content: center;

    block-size: var(--_size);
    inline-size: var(--_size);
    margin: 0;

    vertical-align: middle;

    background: var(--_bg);
    border: var(--ui-border-width-sm, #{t.$border-width-sm}) solid var(--_border-color);
    border-radius: 50%;
    cursor: pointer;
    // Reset native radio
    appearance: none;

    transition:
      background-color var(--ui-duration-fast, 150ms) var(--ui-ease-default, ease),
      border-color var(--ui-duration-fast, 150ms) var(--ui-ease-default, ease),
      box-shadow var(--ui-duration-fast, 150ms) var(--ui-ease-default, ease);

    // Inner dot for checked state
    &::before {
      content: '';

      block-size: 50%;
      inline-size: 50%;

      background-color: var(--_dot-color);
      border-radius: 50%;
      opacity: 0;
      transform: scale(0);

      transition:
        opacity var(--ui-duration-fast, 150ms) var(--ui-ease-default, ease),
        transform var(--ui-duration-fast, 150ms) var(--ui-ease-default, ease);
    }

    &:hover:not(:disabled) {
      border-color: var(--_border-color-focus);
    }

    &:focus-visible {
      border-color: var(--_border-color-focus);
      outline: none;
      box-shadow: 0 0 0 var(--ui-border-width-md, #{t.$border-width-md}) var(--ui-color-focus, #{t.$color-focus});
    }

    &:checked {
      background: var(--_bg-checked);
      border-color: var(--_bg-checked);

      &::before {
        opacity: 1;
        transform: scale(1);
      }
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }
}
