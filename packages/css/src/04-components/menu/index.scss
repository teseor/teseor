@use '../../00-config/tokens/variables' as t;

// Menu - action menu
// Dropdown list of actions or options

@layer components.tokens {
  .menu {
    --_min-width: var(--ui-menu-min-width, calc(#{t.$unit} * 16));
    --_max-height: var(--ui-menu-max-height, calc(#{t.$unit} * 40));
    --_padding: var(--ui-menu-padding, calc(#{t.$unit} * 1));
    --_radius: var(--ui-menu-radius, var(--ui-radius-md, #{t.$radius-md}));
    --_bg: var(--ui-menu-bg, var(--ui-color-bg, #{t.$color-bg}));
    --_border-color: var(--ui-menu-border-color, var(--ui-color-border, #{t.$color-border}));
    --_shadow: var(--ui-menu-shadow, var(--shadow-lg));
    --_item-padding: var(--ui-menu-item-padding, calc(#{t.$unit} * 1) calc(#{t.$unit} * 2));
    --_item-radius: var(--ui-menu-item-radius, var(--ui-radius-sm, #{t.$radius-sm}));
    --_item-bg-hover: var(--ui-menu-item-bg-hover, var(--ui-color-bg-subtle, #{t.$color-bg-subtle}));
  }
}

@layer components.styles {
  .menu {
    min-inline-size: var(--_min-width);
    max-block-size: var(--_max-height);
    padding: var(--_padding);
    overflow-y: auto;

    background: var(--_bg);
    border-radius: var(--_radius);
    outline: var(--ui-border-width-sm, 0.0625rem) solid var(--_border-color);
    box-shadow: var(--_shadow);
    outline-offset: calc(var(--ui-border-width-sm, 0.0625rem) * -1);
  }

  .menu__group {
    padding: 0;
    margin: 0;

    list-style: none;
  }

  .menu__label {
    padding: var(--_item-padding);

    font-size: var(--ui-font-size-xs, #{t.$font-size-xs});
    font-weight: var(--ui-weight-medium, #{t.$weight-medium});
    line-height: var(--ui-row-1, #{t.$row});
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: var(--ui-color-text-muted, #{t.$color-text-muted});
  }

  .menu__item {
    display: flex;
    align-items: center;
    gap: calc(#{t.$unit} * 1);

    padding: var(--_item-padding);

    font-size: var(--ui-font-size-sm, #{t.$font-size-sm});
    line-height: var(--ui-row-1, #{t.$row});
    text-decoration: none;
    color: var(--ui-color-text, #{t.$color-text});

    background: transparent;
    border: none;
    border-radius: var(--_item-radius);
    cursor: pointer;

    transition: background var(--ui-duration-fast, 100ms) var(--ui-ease-default, ease);

    &:hover,
    &:focus-visible {
      background: var(--_item-bg-hover);
      outline: none;
    }
  }

  .menu__item--danger {
    color: var(--ui-color-danger, #{t.$color-danger});

    &:hover,
    &:focus-visible {
      color: var(--ui-color-danger, #{t.$color-danger});
    }
  }

  .menu__item--disabled,
  .menu__item[aria-disabled="true"] {
    opacity: 0.5;
    pointer-events: none;
  }

  .menu__item-icon {
    flex-shrink: 0;

    block-size: calc(#{t.$unit} * 2);
    inline-size: calc(#{t.$unit} * 2);
  }

  .menu__item-shortcut {
    margin-inline-start: auto;

    font-size: var(--ui-font-size-xs, #{t.$font-size-xs});
    color: var(--ui-color-text-muted, #{t.$color-text-muted});
  }

  .menu__separator {
    display: flex;
    align-items: center;

    block-size: calc(#{t.$unit} * 2);
    margin: 0;

    &::before {
      content: '';
      flex: 1;

      block-size: var(--ui-border-width-sm, 1px);

      background: var(--ui-color-border, #{t.$color-border});
    }
  }

  // Checkbox/radio items
  .menu__item--check,
  .menu__item--radio {

    position: relative;

    padding-inline-start: calc(#{t.$unit} * 4);
  }

  .menu__item-indicator {

    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    inset-inline-start: calc(#{t.$unit} * 1);

    block-size: calc(#{t.$unit} * 2);
    inline-size: calc(#{t.$unit} * 2);
  }
}
