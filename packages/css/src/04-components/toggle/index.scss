@use '../../00-config/tokens/variables' as t;

// Toggle - switch control for boolean states
// Styled checkbox with switch appearance

@layer components.tokens {
  .toggle {
    --_track-width: var(--ui-toggle-track-width, calc(#{t.$unit} * 5));
    --_track-height: var(--ui-toggle-track-height, calc(#{t.$unit} * 3));
    --_track-bg: var(--ui-toggle-track-bg, var(--ui-color-bg-subtle, rgb(0 0 0 / 0.1)));
    --_track-bg-checked: var(--ui-toggle-track-bg-checked, var(--ui-color-primary));
    --_track-radius: var(--ui-toggle-track-radius, calc(#{t.$unit} * 1.5));
    --_thumb-size: var(--ui-toggle-thumb-size, calc(#{t.$unit} * 2.5));
    --_thumb-bg: var(--ui-toggle-thumb-bg, white);
    --_thumb-offset: var(--ui-toggle-thumb-offset, calc(#{t.$unit} / 4));
  }

  .toggle--sm {
    --_track-width: calc(#{t.$unit} * 4);
    --_track-height: calc(#{t.$unit} * 2);
    --_track-radius: #{t.$unit};
    --_thumb-size: calc(#{t.$unit} * 1.5);
  }

  .toggle--lg {
    --_track-width: calc(#{t.$unit} * 6);
    --_track-height: calc(#{t.$unit} * 4);
    --_track-radius: calc(#{t.$unit} * 2);
    --_thumb-size: calc(#{t.$unit} * 3.5);
  }
}

@layer components.styles {
  .toggle {

    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    position: relative;

    block-size: var(--_track-height);
    inline-size: var(--_track-width);

    background: var(--_track-bg);
    border-radius: var(--_track-radius);
    cursor: pointer;

    transition: background var(--ui-duration-fast, 100ms) var(--ui-ease-default, ease);
  }

  // Hidden checkbox input
  .toggle__input {
    position: absolute;

    opacity: 0;
    cursor: pointer;
  }

  // Track (visual container)
  .toggle__track {
    position: absolute;
    inset: 0;

    background: var(--_track-bg);
    border-radius: var(--_track-radius);

    transition: background var(--ui-duration-fast, 100ms) var(--ui-ease-default, ease);
  }

  // Thumb (sliding indicator)
  .toggle__thumb {
    position: absolute;
    inset-block-start: var(--_thumb-offset);
    inset-inline-start: var(--_thumb-offset);

    block-size: var(--_thumb-size);
    inline-size: var(--_thumb-size);

    background: var(--_thumb-bg);
    border-radius: 50%;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.2);

    transition: transform var(--ui-duration-fast, 100ms) var(--ui-ease-default, ease);
  }

  // Checked state
  .toggle__input:checked ~ .toggle__track {
    background: var(--_track-bg-checked);
  }

  .toggle__input:checked ~ .toggle__thumb {
    transform: translateX(calc(var(--_track-width) - var(--_thumb-size) - var(--_thumb-offset) * 2));
  }

  // Focus state
  .toggle__input:focus-visible ~ .toggle__track {
    outline: 2px solid var(--ui-color-focus, var(--ui-color-primary));
    outline-offset: calc(#{t.$unit} / 4);
  }

  // Disabled state
  .toggle__input:disabled ~ .toggle__track,
  .toggle__input:disabled ~ .toggle__thumb {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .toggle:has(.toggle__input:disabled) {
    cursor: not-allowed;
  }
}
