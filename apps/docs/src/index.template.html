<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UI Lib - Living Documentation</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body class="ui-root ui-app-shell">
  <aside class="ui-sidebar">
    <div class="ui-sidebar__header">
      <h1 class="ui-text-xl ui-font-bold">UI Lib</h1>
      <p class="ui-text-sm ui-text-muted">CSS-first components</p>
    </div>

    <nav class="ui-sidebar__nav ui-stack ui-stack--xs">
      <!-- DOCS_NAV -->
    </nav>

    <div class="ui-sidebar__footer">
      <div class="ui-stack ui-stack--xs">
        <button class="ui-button ui-button--sm ui-button--secondary ui-button--block" onclick="toggleDebug('ui-debug-grid')">Toggle Grid</button>
        <button class="ui-button ui-button--sm ui-button--secondary ui-button--block" onclick="toggleDebug('ui-debug-grid-rows')">Toggle Row Grid</button>
        <button class="ui-button ui-button--sm ui-button--secondary ui-button--block" onclick="toggleDebug('ui-debug-baseline')">Toggle Baseline</button>
        <button class="ui-button ui-button--sm ui-button--secondary ui-button--block" onclick="toggleDebug('ui-debug-outline')">Toggle Outlines</button>
      </div>
    </div>
  </aside>

  <main class="ui-main">
    <div class="ui-container">
      <header class="ui-docs-header">
        <p>Base unit: <code>--ui-unit: 0.5rem (8px)</code> | Row: <code>--ui-row: 1rem (16px)</code></p>
      </header>

      <!-- DOCS_CONTENT -->
    </div>
  </main>

  <script src="./debug-grid.js"></script>
  <script src="./tabs.js"></script>
  <script>
    const DEBUG_CLASSES = ['ui-debug-grid', 'ui-debug-grid-rows', 'ui-debug-baseline', 'ui-debug-outline'];

    function getDebugParams() {
      return new URLSearchParams(window.location.search);
    }

    function updateUrl(params) {
      const newUrl = params.toString()
        ? `${window.location.pathname}?${params}${window.location.hash}`
        : `${window.location.pathname}${window.location.hash}`;
      window.history.replaceState({}, '', newUrl);
    }

    function toggleDebug(className) {
      document.body.classList.toggle(className);
      const params = getDebugParams();
      if (document.body.classList.contains(className)) {
        params.set(className, '1');
      } else {
        params.delete(className);
      }
      updateUrl(params);
    }

    const params = getDebugParams();
    DEBUG_CLASSES.forEach(className => {
      if (params.get(className) === '1') {
        document.body.classList.add(className);
      }
    });
  </script>
</body>
</html>
